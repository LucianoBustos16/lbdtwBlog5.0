---
import { getCollection, render } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import { formatDate } from "@utils/utils";


export async function getStaticPaths () {
    const posts = await getCollection("posts");

    return posts.map((post) => ({
        params: { id: post.slug},
        props: { post }

    }))
}

const {post} = Astro.props
const { data, slug } = post
const { title, author, image, pubDate } = data

const { Content } = await render(post)

---


<Layout title={`${title}`}>

    <section class="mx-auto md:max-w-3xl space-y-8 px-4 p-16 sm:px-6 lg:px-8 max-w-full">
        <main class="space-y-4">

            <h1 class="block text-balance text-4xl font-bold tracking-tight text-neutral-800 dark:text-neutral-200 md:text-5xl lg:text-6xl mb-0">
                <Fragment set:html={title} />
            </h1>		

            <div class="text-sm">
                <h4 class="font-bold text-neutral-50">
                {author}
                </h4>

                <p class="text-xs text-neutral-50/[.8]">
                {formatDate(pubDate)}
                </p>
            </div>

        </main>
        
        <img 
            transition:name={`img-${slug}`}
            class="rounded-2xl w-full"
            src={`../images/blog/${image.url}`}
            alt={image.alt || `${title}`} >

            
        <div class="prose-xl text-white prose-invert m-auto">
        <Content />
        </div>

</section>

</Layout>
